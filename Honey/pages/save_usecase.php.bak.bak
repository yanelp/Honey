<?php

require_once('print_cu_menu.php');

html_page_top( plugin_lang_get( 'title' ) );

print_cu_menu();

$t_project_id= helper_get_current_project();


?>
<br/>
<?php



if ($t_project_id == '0'){
echo "El id de proyecto es 0";
die();
	
}

$name=$_REQUEST['cu_name'];
$view = 'CU_001'
$goal=$_REQUEST['goal'];
$preconditions=$_REQUEST['preconditions'];
$postconditions=$_REQUEST['postconditions'];
$obsevations=$_REQUEST['obsevations'];

if ( is_blank( $name )  ) {
//			trigger_error( ERROR_GENERIC, ERROR );
echo "Must add Name, Notion and Type";
$t_page = plugin_page( 'new_usecase_page' );
echo '<br><br>';
echo "<a href=\"$t_page\">Back</a>";
die();
		}



//usecase insert
$t_repo_table = plugin_table( 'usecase', 'honey' );

$t_query_symbol = 'INSERT INTO '.$t_repo_table.' (name, goal, view_id, postconditions, observations, preconditions)
			VALUES ( ' . db_param() . ', ' . db_param() . ', ' . db_param() . ', ' . db_param() . ', ' . db_param() . ', ' . db_param() . ' )';
$g_result_insert_symbol=db_query_bound( $t_query_symbol, array( $name, $goal, $view, $postconditions, $obsevations, $preconditions, $t_project_id) );

$id_usecase=mysql_insert_id();


echo "<p>Saved data</p>";

$t_page = plugin_page( 'new_symbol_page' );

echo '<br><br>';
echo "<a href=\"$t_page\">Back</a>";

html_page_bottom( );
